<button mat-icon-button mat-dialog-close class="close-icon" tabindex="-1">
    <mat-icon>close</mat-icon>
</button>

<mat-dialog-content>
    <div *ngIf="!isReviewRequestComplete; else isReviewRequestCompleteElse" style="">
        <form [formGroup]="formGroup">
            <div class="title ">코드리뷰 요청하기</div>

            <div class="mx-8 my-8">
                <div class="text-xs font-bold text-charcoal mb-2">코드리뷰를 요청할 Repository를 선택하세요.</div>
                <div>
                    <mat-form-field appearance="fill" floatLabel="always" class="w-48">
    <!--                    <mat-label>Repository</mat-label>-->
                        <mat-select formControlName="repoName" (selectionChange)="repoChanged($event)" [(ngModel)]="repoName">
                            <mat-option value="">Repository 선택</mat-option>
                            <mat-option [value]="repo.name" *ngFor="let repo of personalPublicRepos">
                                {{ repo.name }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <!-- TODO:spock make it more detail perfectly-->
                </div>
                <div class="text-xs font-bold text-charcoal mb-2 mt-5 md:mt-0">코드리뷰를 요청할 Branch를 선택하세요.</div>
                <div class="md:flex flex-none">
    <!--                <div class="flex items-center">-->
    <!--                    <mat-radio-group aria-label="Select an option w-4">-->
    <!--                        <mat-radio-button value="1" class="mr-5 text-xs text-charcoal">전체 소스코드</mat-radio-button>-->
    <!--                        <mat-radio-button value="2" class="text-xs text-charcoal">변경된 소스코드만</mat-radio-button>-->
    <!--                    </mat-radio-group>-->
    <!--                </div>-->
    <!--                <div class="flex items-center mx-3"><img src="/assets/icons/code-request-arrow-right.svg"></div>-->
                    <div>
                        <mat-form-field appearance="fill" class="w-48 h-8">
                            <mat-select formControlName="branchName" [(ngModel)]="branchName">
                                <mat-option value="">Branch 선택</mat-option>
                                <mat-option [value]="branch.name" *ngFor="let branch of branchesOnRepo">
                                    {{ branch.name }}
                                </mat-option>
                            </mat-select> 
                        </mat-form-field>
                    </div>
                    <div class="flex items-center w-4 md:mx-3 ml-20 my-4 md:my-0"><img src="/assets/icons/code-request-arrow-right.svg"></div>
                    <div>
                        <mat-form-field appearance="fill" class="w-48 h-8">
                            <mat-select formControlName="targetBranchName" [(ngModel)]="targetBranchName">
                                <mat-option value="">Branch 선택</mat-option>
                                <mat-option [value]="branch.name" *ngFor="let branch of branchesOnRepo">
                                    {{ branch.name }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="text-xs font-bold text-charcoal mb-2 mt-5">이 프로젝트에 사용한 기술의 이해도(숙련도)는 어느 정도인가요?</div>
                <div class="flex items-center">
                    <mat-radio-group formControlName="proficiency" [(ngModel)]="proficiency">
                        <mat-radio-button value="newbie" class="mr-5 text-xs text-charcoal">Newbie</mat-radio-button>
                        <mat-radio-button value="beginner" class="mr-5 text-xs text-charcoal">Beginner</mat-radio-button>
                        <mat-radio-button value="intermediate" class="mr-5 text-xs text-charcoal">Intermediate</mat-radio-button>
                        <mat-radio-button value="expert" class="text-xs text-charcoal">Expert</mat-radio-button>
                    </mat-radio-group>
                </div>
                <!-- input form-->
                <div class="mt-5 ">
                    <div class="border rounded mb-5 ">
                        <!-- <div >*</div>-->
                        <input class="text-sm h-8 pl-2" formControlName="title" placeholder="제목을 입력해주세요." [(ngModel)]="title">
                    </div>
                    <div class="text-xs font-bold text-charcoal mb-2">이 프로잭트에 대해 간략히 설명해주세요.</div>
                    <div class="border rounded">
                        <textarea class="w-full px-2 py-2" formControlName="description" [(ngModel)]="description" rows="5"
                                  placeholder="예시) &#10;실시간 검색을 통해 호텔의 객실을 조회하고 예약할 수 있는 서비스입니다."></textarea>
                    </div>
                    <div class="text-xs font-bold text-charcoal mb-2 mt-5">코드리뷰시 어떤 측면을 중심으로 받고 싶으신가요?</div>
                    <div class="border rounded">
                        <textarea class="w-full px-2 py-2" formControlName="purpose" [(ngModel)]="purpose" rows="10"
                                  placeholder="예시) &#10;코드 확장성과 재사용에 대해서 제대로 사용하는지 알고싶습니다."></textarea>
                    </div>
                    <div class="flex justify-end mt-8">
                        <button class="btn-green flex items-center px-2 py-1" mat-raised-button (click)="requestCreateReview($event)"><img src="/assets/icons/pr-open.svg" class="w-3 mr-1">코드리뷰 요청</button>
                    </div>
                </div>

            </div>
        </form>
    </div>
    <div>
        <ng-template #isReviewRequestCompleteElse>
            <div class="title ">코드리뷰 요청하기</div>
            <div class="">
                <div class="mx-auto pt-20 pb-20 text-center">
                    <div class="text-charcoal text-4xl font-bold pb-3 pt-3">
                        gitcode
                    </div>
                    <div class="text-charcoal">코드리뷰 요청이 완료되었습니다.</div>
                    <div class="text-charcoal">친구들에게 현재 코드리뷰를 공유해보면 어떨까요?</div>
                    <button type="button" class="gitcode-box text-charcoal w-1/3 mx-auto mt-5 py-1"
                            (click)="closePopup($event)">
                        당신을 항상 응원합니다!
                    </button>
                </div>
            </div>
        </ng-template>
    </div>

</mat-dialog-content>
